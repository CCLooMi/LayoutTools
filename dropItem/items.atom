<div icon="form">
    <script inject="$modal">
        console.log([$event,undoList,style,body,ce,cdf]);
        const target=$event.target;
        const app = Atom.app('LayoutTools');
        const scope = {types:['v']};
        scope.code=function (){
            return `<cc-form ${scope.types.filter(i=>i).join(' ')}></cc-form>`;
        }
        $modal.dialog()
            .content(app.getPaths('views/modal/form.atom'))
            .scope(scope)
            .width(555)
            .height('auto')
            .ok(function(){
                target.html(scope.code());
                undoList.push(function (){
                    target.html('');
                });
            });
    </script>
</div>
<div icon="input">
    <form-group label="Name">
        <label>Name</label>
        <form-input>
            <input type="text" placeholder="Name"
                cc-model="name"
                cc-l-max="255:Name cannot exceed 255 characters！"
                cc-require=":Name cannot be empty！"
                file-name=":Name cannot contain special characters！">
        </form-input>
    </form-group>
    <script inject="$modal">
        const target = $event.target;
        const app = Atom.app('LayoutTools');
        const sd = target.shadowRoot||target;
        var form = sd.findOne('form');
        if(!form){
            form = ce('form');
            sd.append(form);
        }
        const scope = {};
        switch(target.localName){
            case 'cc-form':
            const nds = Atom.toNodes(body);
            const list = [...nds];
            form.append(...nds);
            undoList.push(function (){
                list.forEach(nd=>nd.remove());
                list.length=0;
            });
            break;
        }
    </script>
</div>